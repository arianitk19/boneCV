<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>boneCV | Arkiva Reale</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="manifest" href="manifest.json">
<script src="master.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@200;400;600;800&display=swap');
        :root { --accent: #2563eb; --bg: #050505; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: #fff; }

        #sidebar {
            width: 280px; background: rgba(5,5,5,0.9); backdrop-filter: blur(40px);
            border-right: 1px solid rgba(255,255,255,0.05); transition: 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            transform: translateX(-100%); z-index: 3000;
        }
        #sidebar.active { transform: translateX(0); }

        #main-content { transition: padding-left 0.5s; min-height: 100vh; width: 100%; }

        .vault-card {
            background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 24px; padding: 20px; transition: 0.3s;
        }
        .vault-card:hover { background: rgba(255,255,255,0.05); transform: translateY(-5px); border-color: var(--accent); }

        /* Status Colors */
        .tag-cv { background: rgba(37, 99, 235, 0.1); color: #3b82f6; }
        .tag-contract { background: rgba(245, 158, 11, 0.1); color: #f59e0b; }
        .tag-request { background: rgba(168, 85, 247, 0.1); color: #a855f7; }

        .empty-state { opacity: 0.3; text-align: center; padding: 100px 0; }
    </style>
</head>
<body class="flex">

    <aside id="sidebar" class="fixed inset-y-0 left-0 flex flex-col p-8">
        <div class="flex items-center justify-between mb-16">
            <h2 class="text-2xl font-black italic text-white">boneCV</h2>
            <button onclick="toggleSidebar()" class="text-slate-500"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <nav class="flex-1 space-y-2 text-sm font-bold">
            <a href="index.html" class="flex items-center gap-4 p-4 rounded-2xl text-slate-400 hover:bg-white/5"><i class="fa-solid fa-house"></i> Dashboard</a>
            <a href="cv.html" class="flex items-center gap-4 p-4 rounded-2xl text-slate-400 hover:bg-white/5"><i class="fa-solid fa-id-card"></i> Studio CV</a>
            <a href="kontrata.html" class="flex items-center gap-4 p-4 rounded-2xl text-slate-400 hover:bg-white/5"><i class="fa-solid fa-file-signature"></i> Kontratat</a>
            <a href="kerkesa.html" class="flex items-center gap-4 p-4 rounded-2xl text-slate-400 hover:bg-white/5"><i class="fa-solid fa-paper-plane"></i> Kërkesat</a>
            <a href="arkiva.html" class="flex items-center gap-4 p-4 rounded-2xl bg-blue-600 text-white shadow-xl"><i class="fa-solid fa-box-archive"></i> Arkiva</a>
        </nav>
    </aside>

    <main id="main-content" class="flex-1 p-6 md:p-12">
        <header class="flex justify-between items-center mb-12">
            <div class="flex items-center gap-4">
                <button onclick="toggleSidebar()" class="w-12 h-12 bg-white/5 rounded-2xl flex items-center justify-center border border-white/10">
                    <i class="fa-solid fa-bars-staggered"></i>
                </button>
                <h1 class="text-2xl font-black uppercase tracking-tighter">Kasaforta <span class="text-blue-600">Digjitale</span></h1>
            </div>
            <button onclick="clearArchive()" class="text-[10px] font-black uppercase tracking-widest text-red-500 hover:bg-red-500/10 px-4 py-2 rounded-xl transition">Fshi të gjitha</button>
        </header>

        <div class="grid grid-cols-3 gap-4 mb-12">
            <div class="bg-white/5 p-4 rounded-3xl border border-white/5">
                <p class="text-[10px] font-bold text-zinc-500 uppercase">Dokumente</p>
                <p class="text-2xl font-black" id="total-docs">0</p>
            </div>
            <div class="bg-white/5 p-4 rounded-3xl border border-white/5">
                <p class="text-[10px] font-bold text-zinc-500 uppercase">Hapësira</p>
                <p class="text-2xl font-black text-green-500">Free</p>
            </div>
            <div class="bg-white/5 p-4 rounded-3xl border border-white/5 text-blue-600">
                <p class="text-[10px] font-bold text-zinc-500 uppercase">Sinkronizimi</p>
                <i class="fa-solid fa-cloud-check"></i> Live
            </div>
        </div>

        <div id="archive-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </div>

        <div id="empty-msg" class="empty-state hidden">
            <i class="fa-solid fa-folder-open text-6xl mb-4"></i>
            <p class="text-xl font-bold">Arkiva është bosh</p>
            <p class="text-sm">Krijo një dokument për ta parë këtu.</p>
        </div>
    </main>

   <script>
    // 1. NGARKIMI I ARKIVËS (Logjika Kryesore)
    function loadArchive() {
        const grid = document.getElementById('archive-grid');
        const emptyMsg = document.getElementById('empty-msg');
        const totalDocs = document.getElementById('total-docs');
        
        if(!grid || !emptyMsg || !totalDocs) return;

        // Lexojmë të dhënat nga memoria
        let docs = JSON.parse(localStorage.getItem('boneCV_Archive')) || [];
        totalDocs.innerText = docs.length;

        if (docs.length === 0) {
            grid.innerHTML = '';
            emptyMsg.classList.remove('hidden');
            return;
        }

        emptyMsg.classList.add('hidden');
        grid.innerHTML = docs.map((doc, index) => {
            // Përcaktojmë ngjyrat në bazë të llojit të dokumentit
            const colorClass = doc.type === 'CV' ? 'border-l-blue-600' : 
                               doc.type === 'Kontratë' ? 'border-l-amber-500' : 'border-l-purple-500';
            const tagClass = doc.type === 'CV' ? 'bg-blue-600/20 text-blue-400' : 
                             doc.type === 'Kontratë' ? 'bg-amber-600/20 text-amber-400' : 'bg-purple-600/20 text-purple-400';

            return `
                <div class="vault-card p-6 rounded-2xl bg-white/5 border-l-4 ${colorClass} transition hover:bg-white/10">
                    <div class="flex justify-between items-start mb-6">
                        <span class="px-3 py-1 rounded-full text-[9px] font-black uppercase ${tagClass}">${doc.type}</span>
                        <button onclick="deleteDoc(${index})" class="text-zinc-600 hover:text-red-500 transition-all">
                            <i class="fa-solid fa-trash-can"></i>
                        </button>
                    </div>
                    <h3 class="text-lg font-black tracking-tight mb-1 truncate text-white">${doc.title}</h3>
                    <p class="text-[10px] text-zinc-500 font-bold mb-6">${doc.date}</p>
                    <div class="flex gap-2">
                        <button onclick="alert('Ky funksion (Open) kërkon lidhjen me databazën!')" class="flex-1 py-3 bg-white/5 hover:bg-white/10 rounded-xl text-[10px] font-black uppercase tracking-widest transition">Hap</button>
                        <button onclick="window.print()" class="w-12 py-3 bg-blue-600 hover:bg-blue-700 rounded-xl flex items-center justify-center transition text-white">
                            <i class="fa-solid fa-download"></i>
                        </button>
                    </div>
                </div>
            `;
        }).join('');
    }

    // 2. FUNKSIONET E FSHIRJES
    window.deleteDoc = function(index) {
        if(confirm("A dëshironi ta fshini këtë dokument?")) {
            let docs = JSON.parse(localStorage.getItem('boneCV_Archive')) || [];
            docs.splice(index, 1);
            localStorage.setItem('boneCV_Archive', JSON.stringify(docs));
            loadArchive(); // Rifreskon listën menjëherë
        }
    }

    window.clearArchive = function() {
        if(confirm("⚠️ KUJDES: A jeni i sigurt që dëshironi të fshini të gjithë arkivën?")) {
            localStorage.removeItem('boneCV_Archive');
            loadArchive();
        }
    }

    // 3. UI & TEMAT
    function toggleSidebar() {
        const sb = document.getElementById('sidebar');
        const mc = document.getElementById('main-content');
        if(!sb) return;
        sb.classList.toggle('active');
        if(window.innerWidth > 1024 && mc) {
            mc.style.paddingLeft = sb.classList.contains('active') ? '280px' : '0';
        }
    }

    // 4. NISJA (BASHKIMI I ONLOAD)
    window.onload = function() {
        // Kontrollon nese master.js ka aplikuar temën
        if(typeof applyGlobalSettings === 'function') {
            applyGlobalSettings();
        }
        loadArchive();
    };
</script>


</body>

</html>
