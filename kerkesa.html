<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>boneCV | Kërkesat Elitë</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="master.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@200;400;600;800&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;600&display=swap');
        
        :root { --accent: #2563eb; --bg: #030303; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: #fff; overflow-x: hidden; height: 100vh; }

        /* --- SIDEBAR KONSISTENT --- */
        #sidebar {
            width: 280px; background: rgba(5,5,5,0.9); backdrop-filter: blur(40px);
            border-right: 1px solid rgba(255,255,255,0.04); transition: 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            transform: translateX(-100%); z-index: 3000;
        }
        #sidebar.active { transform: translateX(0); }

        /* --- LAYOUT --- */
        #main-wrapper { transition: padding-left 0.5s; display: grid; grid-template-columns: 450px 1fr; height: 100vh; }

        /* --- EDITOR PANEL --- */
        .editor-panel { 
            background: linear-gradient(180deg, #0a0a0a 0%, #050505 100%); 
            border-right: 1px solid rgba(255,255,255,0.05); 
            overflow-y: auto; scrollbar-width: none; 
        }

        /* --- PREVIEW ZONE --- */
        .preview-area { 
            background: radial-gradient(circle at center, #111 0%, #000 100%);
            overflow-y: auto; display: flex; justify-content: center; padding: 80px 0;
            perspective: 1500px;
        }

        #request-paper {
            width: 210mm; min-height: 297mm; 
            background: #fff; color: #111;
            padding: 30mm; 
            box-shadow: 0 60px 120px rgba(0,0,0,0.9);
            transform: rotateX(2deg) scale(0.8); transform-origin: top center;
            transition: 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
        }

        /* --- UI COMPONENTS --- */
        .glass-card { 
            background: rgba(255,255,255,0.02); 
            border: 1px solid rgba(255,255,255,0.06); 
            border-radius: 24px; padding: 24px; margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        
        .input-elite { 
            width: 100%; background: #121212; border: 1px solid #222; 
            border-radius: 14px; padding: 16px; color: #fff; margin-bottom: 12px; 
            font-size: 13px; transition: 0.3s;
        }
        .input-elite:focus { border-color: var(--accent); background: #181818; outline: none; }
        
        .design-dot { width: 40px; height: 40px; border-radius: 12px; cursor: pointer; border: 2px solid transparent; transition: 0.3s; }
        .design-dot.active { border-color: var(--accent); transform: scale(1.1); }

        /* ============================================================
           SUPER PDF GENERATION ENGINE (PASTRIMI I PLOTË)
           ============================================================ */
        @media print {
            @page { size: A4; margin: 0; }
            body { background: white !important; overflow: visible !important; }
            #sidebar, .editor-panel, header, .no-print { display: none !important; }
            
            #main-wrapper { display: block !important; padding: 0 !important; margin: 0 !important; }
            
            .preview-area { 
                display: block !important; 
                background: white !important; 
                padding: 0 !important; 
                margin: 0 !important;
                overflow: visible !important;
                perspective: none !important;
            }

            #request-paper { 
                transform: none !important; 
                box-shadow: none !important; 
                margin: 0 !important; 
                width: 210mm !important; 
                min-height: 297mm !important;
                padding: 25mm !important; /* Margjinat zyrtare të printimit */
                border: none !important;
                background-image: none !important; /* Hiqet efekti i fletoreve */
                position: static !important;
            }

            #request-paper * { color: black !important; -webkit-print-color-adjust: exact; }
            .border-b-2 { border-bottom-color: #eee !important; }
        }

        @media (max-width: 1024px) {
            #main-wrapper { grid-template-columns: 1fr; }
            .preview-area { display: none; }
            #request-paper { transform: scale(1); width: 100%; }
        }
    </style>
</head>
<body class="flex">

    <aside id="sidebar" class="fixed inset-y-0 left-0 flex flex-col p-8 no-print">
        <div class="flex items-center justify-between mb-16">
            <h2 class="text-2xl font-black italic tracking-tighter text-white">boneCV</h2>
            <button onclick="toggleSidebar()" class="text-slate-500 hover:text-white"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <nav class="flex-1 space-y-2 text-sm font-bold">
            <a href="index.html" class="flex items-center gap-4 p-4 rounded-2xl text-slate-400 hover:bg-white/5"><i class="fa-solid fa-house"></i> Dashboard</a>
            <a href="cv.html" class="flex items-center gap-4 p-4 rounded-2xl text-slate-400 hover:bg-white/5"><i class="fa-solid fa-id-card"></i> Studio CV</a>
            <a href="kontrata.html" class="flex items-center gap-4 p-4 rounded-2xl text-slate-400 hover:bg-white/5"><i class="fa-solid fa-file-signature"></i> Kontratat</a>
            <a href="kerkesa.html" class="flex items-center gap-4 p-4 rounded-2xl bg-blue-600 text-white shadow-xl shadow-blue-900/40"><i class="fa-solid fa-paper-plane"></i> Kërkesat</a>
            <a href="arkiva.html" class="flex items-center gap-4 p-4 rounded-2xl text-slate-400 hover:bg-white/5"><i class="fa-solid fa-box-archive"></i> Arkiva</a>
        </nav>
    </aside>

    <main id="main-wrapper" class="flex-1 w-full">
        <section class="editor-panel no-print">
            <header class="p-8 sticky top-0 bg-[#0a0a0a]/90 backdrop-blur-xl border-b border-white/5 flex justify-between items-center z-50">
                <button onclick="toggleSidebar()" class="w-12 h-12 bg-white/5 rounded-2xl flex items-center justify-center border border-white/10">
                    <i class="fa-solid fa-bars-staggered"></i>
                </button>
                <button onclick="superGenerate()" class="px-8 py-3 bg-blue-600 text-white rounded-2xl font-black text-[10px] uppercase tracking-widest hover:scale-105 transition-all shadow-lg shadow-blue-600/20">
                    Gjenero & Ruaj
                </button>
            </header>

            <div class="p-10">
                <h1 class="text-4xl font-black tracking-tighter mb-10 italic">Premium <span class="text-blue-600">Draft.</span></h1>

                <div class="glass-card">
                    <p class="text-[10px] font-black uppercase tracking-widest text-zinc-500 mb-6">Personalizo Elegancën</p>
                    <div class="flex gap-4">
                        <div class="design-dot active bg-white border-zinc-200" onclick="updateStyle('modern', this)" title="Modern"></div>
                        <div class="design-dot bg-orange-50" style="background-color: #fdfaf0;" onclick="updateStyle('classic', this)" title="Classic Cream"></div>
                        <div class="design-dot bg-zinc-100" style="background-color: #f4f4f5;" onclick="updateStyle('minimal', this)" title="Soft Gray"></div>
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="glass-card">
                        <p class="text-[10px] font-black uppercase tracking-widest text-blue-600 mb-6">Lokacioni & Koha</p>
                        <div class="grid grid-cols-2 gap-4">
                            <input type="text" id="in-city" class="input-elite" placeholder="Qyteti" oninput="sync()">
                            <input type="text" id="in-state" class="input-elite" placeholder="Shteti" oninput="sync()">
                        </div>
                        <input type="date" id="in-date" class="input-elite" oninput="sync()">
                    </div>

                    <div class="glass-card">
                        <p class="text-[10px] font-black uppercase tracking-widest text-blue-600 mb-6">Përmbajtja</p>
                        <input type="text" id="in-name" class="input-elite" placeholder="Emri juaj i plotë" oninput="sync()">
                        <input type="text" id="in-to" class="input-elite" placeholder="Drejtuar: Departamenti / Personi" oninput="sync()">
                        <textarea id="in-body" class="input-elite h-40" placeholder="Shpjegoni kërkesën tuaj me profesionalizëm..." oninput="sync()"></textarea>
                    </div>
                </div>
            </div>
        </section>

        <section class="preview-area">
            <div id="request-paper">
                <div class="flex justify-between items-start mb-20">
                    <div class="text-[10px] font-bold uppercase tracking-[4px] border-l-2 border-black pl-4">
                        Official Request<br>System boneCV
                    </div>
                    <div class="text-right text-xs">
                        <p class="font-bold" id="out-location">Prishtinë, Kosovë</p>
                        <p class="opacity-60" id="out-date">11 Shkurt, 2026</p>
                    </div>
                </div>

                <div class="mb-12">
                    <p class="text-[10px] font-black uppercase opacity-40 mb-2">Drejtuar:</p>
                    <p class="text-xl font-bold" id="out-to">Zyrës së Burimeve Njerëzore</p>
                </div>

                <div class="mb-10">
                    <h2 class="text-3xl font-serif italic border-b-2 border-zinc-100 pb-6" id="out-type">Kërkesë Zyrtare</h2>
                </div>

                <div class="text-sm leading-[1.8] text-zinc-800 space-y-6 mb-20">
                    <p>I/E nderuar,</p>
                    <p id="out-body" class="whitespace-pre-line text-justify">
                        Unë, <b id="out-name">[Emri Juaj]</b>, po ju shkruaj këtë kërkesë për të shprehur nevojën time lidhur me proceset e punës brenda institucionit tuaj. 
                        
                        Ju lutem konsideroni pikat e lartpërmendura me vëmendje. Jam në dispozicion për të diskutuar më detajisht rreth kësaj kërkese në një kohë të përshtatshme për ju.
                    </p>
                </div>

                <div class="mt-auto pt-10 flex justify-between items-end">
                    <div>
                        <p class="text-[9px] font-black uppercase tracking-widest opacity-40 mb-10">Me respekt,</p>
                        <p class="text-2xl font-serif italic" id="out-sign-name">[Emri Juaj]</p>
                        <div class="w-40 border-b border-black mt-2"></div>
                    </div>
                    <div class="text-[8px] font-bold opacity-30 text-right">
                        Gjeneruar elektronikisht nga<br>boneCV Legal Studio v2.0
                    </div>
                </div>
            </div>
        </section>
    </main>

<script>
    function toggleSidebar() {
        const sb = document.getElementById('sidebar');
        const wr = document.getElementById('main-wrapper');
        if(!sb || !wr) return;
        sb.classList.toggle('active');
        if(window.innerWidth > 1024) {
            wr.style.paddingLeft = sb.classList.contains('active') ? '280px' : '0';
        }
    }

    function sync() {
        const city = document.getElementById('in-city').value || "Qyteti";
        const state = document.getElementById('in-state').value || "Shteti";
        const name = document.getElementById('in-name').value || "[Emri Juaj]";
        const dateInput = document.getElementById('in-date').value;

        document.getElementById('out-location').innerText = `${city}, ${state}`;
        document.getElementById('out-name').innerText = name;
        document.getElementById('out-sign-name').innerText = name;
        document.getElementById('out-to').innerText = document.getElementById('in-to').value || "Zyrës Përgjegjëse";
        document.getElementById('out-body').innerText = document.getElementById('in-body').value || "Teksti i kërkesës suaj...";
        
        if(dateInput) {
            const d = new Date(dateInput);
            document.getElementById('out-date').innerText = d.toLocaleDateString('sq-AL', { day:'numeric', month:'long', year:'numeric' });
        }
    }

    function superGenerate() {
        const emri = document.getElementById('in-name').value || "Përdorues";
        const subjekti = document.getElementById('in-to').value || "Kërkesë";
        
        if(window.saveToArchive) {
            window.saveToArchive("Kërkesë", `${subjekti} (${emri})`);
        } else {
            let arkiva = JSON.parse(localStorage.getItem('boneCV_Archive')) || [];
            arkiva.unshift({ id: Date.now(), title: `${subjekti} (${emri})`, type: "Kërkesë", date: new Date().toLocaleDateString('sq-AL') });
            localStorage.setItem('boneCV_Archive', JSON.stringify(arkiva));
        }
        window.print();
    }

    function updateStyle(style, el) {
        const paper = document.getElementById('request-paper');
        document.querySelectorAll('.design-dot').forEach(d => d.classList.remove('active'));
        el.classList.add('active');

        const styles = {
            'modern': { bg: "#ffffff", font: "'Plus Jakarta Sans', sans-serif" },
            'classic': { bg: "#fdfaf0", font: "'Playfair Display', serif" },
            'minimal': { bg: "#f4f4f5", font: "'Inter', sans-serif" }
        };

        if(styles[style]) {
            paper.style.backgroundColor = styles[style].bg;
            paper.style.fontFamily = styles[style].font;
        }
    }

    window.onload = () => {
        if(window.innerWidth > 1024) setTimeout(toggleSidebar, 600);
    };
</script>

</body>
</html>